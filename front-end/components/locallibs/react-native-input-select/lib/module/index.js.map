{"version":3,"names":["React","useState","useEffect","useCallback","TouchableOpacity","StyleSheet","View","Input","CheckBox","Dropdown","DropdownFlatList","DropdownSectionList","CustomModal","colors","DEFAULT_OPTION_LABEL","DEFAULT_OPTION_VALUE","escapeRegExp","extractPropertyFromArray","DropdownSelect","_ref","_extractPropertyFromA","_searchControls$textI","placeholder","label","error","helperText","options","optionLabel","optionValue","onValueChange","selectedValue","isMultiple","isSearchable","dropdownIcon","labelStyle","placeholderStyle","dropdownStyle","dropdownIconStyle","dropdownContainerStyle","dropdownErrorStyle","dropdownErrorTextStyle","dropdownHelperTextStyle","selectedItemStyle","multipleSelectedItemStyle","modalBackgroundStyle","modalOptionsContainerStyle","searchInputStyle","primaryColor","disabled","checkboxSize","checkboxStyle","checkboxLabelStyle","checkboxComponentStyles","checkboxComponent","listHeaderComponent","listFooterComponent","listComponentStyles","modalProps","hideModal","listControls","searchControls","rest","newOptions","setNewOptions","open","setOpen","selectAll","setSelectAll","selectedItem","setSelectedItem","selectedItems","setSelectedItems","searchValue","setSearchValue","listIndex","setListIndex","itemIndex","sectionIndex","Array","isArray","isSectionList","some","item","title","data","ListTypeComponent","modifiedSectionData","flat","modifiedOptions","optLabel","optValue","handleSingleSelection","value","handleMultipleSelections","prevVal","_selectedValues","selectedValues","includes","filter","push","removeDisabledItems","items","handleSelectAll","filteredOptions","i","length","selectAllCallback","unselectAllCallback","checkSelectAll","_removeDisabledItems","getSelectedItemsLabel","selectedLabels","forEach","element","_modifiedOptions$find","selectedItemLabel","find","onSearch","searchText","toString","toLocaleLowerCase","trim","regexFilter","RegExp","searchResults","searchSectionList","searchFlatList","flatList","toLowerCase","search","sectionList","map","listItem","filteredData","handleToggleModal","primary","gray","setIndexOfSelectedItem","selectedLabel","_item$data","dataItem","createElement","Fragment","_extends","onRequestClose","ListHeaderComponent","onChangeText","text","style","textInputStyle","textInputContainerStyle","textInputProps","hideSelectAll","styles","optionsContainerStyle","onPress","unselectAllText","selectAllText","onChange","ListFooterComponent","emptyListMessage","create","paddingHorizontal","paddingVertical","flexDirection"],"sources":["index.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { TouchableOpacity, StyleSheet, View } from 'react-native';\nimport Input from './components/Input';\nimport CheckBox from './components/CheckBox';\nimport Dropdown from './components/Dropdown/Dropdown';\nimport DropdownFlatList from './components/Dropdown/DropdownFlatList';\nimport DropdownSectionList from './components/Dropdown/DropdownSectionList';\nimport CustomModal from './components/CustomModal';\nimport { colors } from './styles/colors';\nimport { DEFAULT_OPTION_LABEL, DEFAULT_OPTION_VALUE } from './constants';\nimport type {\n  DropdownProps,\n  TFlatList,\n  TFlatListItem,\n  TSectionList,\n  TSectionListItem,\n} from './types/index.types';\nimport { escapeRegExp, extractPropertyFromArray } from './utils';\n\nexport const DropdownSelect: React.FC<DropdownProps> = ({\n  placeholder,\n  label,\n  error,\n  helperText,\n  options,\n  optionLabel,\n  optionValue,\n  onValueChange,\n  selectedValue,\n  isMultiple,\n  isSearchable,\n  dropdownIcon,\n  labelStyle,\n  placeholderStyle,\n  dropdownStyle,\n  dropdownIconStyle,\n  dropdownContainerStyle,\n  dropdownErrorStyle,\n  dropdownErrorTextStyle,\n  dropdownHelperTextStyle,\n  selectedItemStyle,\n  multipleSelectedItemStyle,\n  modalBackgroundStyle,\n  modalOptionsContainerStyle,\n  searchInputStyle, // kept for backwards compatibility\n  primaryColor,\n  disabled,\n  checkboxSize, // kept for backwards compatibility\n  checkboxStyle, // kept for backwards compatibility\n  checkboxLabelStyle, // kept for backwards compatibility\n  checkboxComponentStyles,\n  checkboxComponent,\n  listHeaderComponent,\n  listFooterComponent,\n  listComponentStyles,\n  modalProps,\n  hideModal = false,\n  listControls,\n  searchControls,\n  ...rest\n}) => {\n  const [newOptions, setNewOptions] = useState<TFlatList | TSectionList>([]);\n  const [open, setOpen] = useState<boolean>(false);\n  const [selectAll, setSelectAll] = useState<boolean>(false);\n  const [selectedItem, setSelectedItem] = useState<any>(''); // for single selection\n  const [selectedItems, setSelectedItems] = useState<any[]>([]); // for multiple selection\n  const [searchValue, setSearchValue] = useState<string>('');\n  const [listIndex, setListIndex] = useState<{\n    sectionIndex?: number;\n    itemIndex: number;\n  }>({ itemIndex: -1, sectionIndex: -1 }); // for scrollToIndex in Sectionlist and Flatlist\n\n  useEffect(() => {\n    setNewOptions(options);\n    return () => {};\n  }, [options]);\n\n  useEffect(() => {\n    isMultiple\n      ? setSelectedItems(Array.isArray(selectedValue) ? selectedValue : [])\n      : setSelectedItem(selectedValue);\n\n    return () => {};\n  }, [selectedValue, isMultiple, onValueChange]);\n\n  /*===========================================\n   * List type\n   *==========================================*/\n\n  // check the structure of the new options array to determine if it is a section list or a\n  const isSectionList = newOptions?.some(\n    (item) => item.title && item.data && Array.isArray(item.data)\n  );\n\n  const ListTypeComponent = isSectionList\n    ? DropdownSectionList\n    : DropdownFlatList;\n  const modifiedSectionData = extractPropertyFromArray(\n    newOptions,\n    'data'\n  )?.flat();\n\n  /**\n   * `options` is the original array, it never changes. (Do not use except you really need the original array) .\n   * `newOptions` is a copy of options but can be mutated by `setNewOptions`, as a result, the value many change.\n   * `modifiedOptions` should only be used for computations. It has the same structure for both `FlatList` and `SectionList`\n   */\n  const modifiedOptions = isSectionList ? modifiedSectionData : newOptions;\n\n  const optLabel = optionLabel || DEFAULT_OPTION_LABEL;\n  const optValue = optionValue || DEFAULT_OPTION_VALUE;\n\n  /*===========================================\n   * Selection handlers\n   *==========================================*/\n  const handleSingleSelection = (value: string | number) => {\n    if (selectedItem === value) {\n      setSelectedItem(null);\n      onValueChange(null); // send value to parent\n    } else {\n      setSelectedItem(value);\n      onValueChange(value); // send value to parent\n      setOpen(false); // close modal upon selection\n    }\n  };\n\n  const handleMultipleSelections = (value: string[] | number[]) => {\n    setSelectedItems((prevVal) => {\n      let selectedValues = [...prevVal];\n\n      if (selectedValues?.includes(value)) {\n        selectedValues = selectedValues.filter((item) => item !== value);\n      } else {\n        selectedValues.push(value);\n      }\n      onValueChange(selectedValues); // send value to parent\n      return selectedValues;\n    });\n  };\n\n  const removeDisabledItems = (items: TFlatList) => {\n    return items?.filter((item: TFlatListItem) => !item.disabled);\n  };\n\n  const handleSelectAll = () => {\n    setSelectAll((prevVal) => {\n      const selectedValues = [];\n\n      // don't select disabled items\n      const filteredOptions = removeDisabledItems(\n        isSectionList\n          ? extractPropertyFromArray(options, 'data').flat()\n          : options\n      );\n\n      if (!prevVal) {\n        for (let i = 0; i < filteredOptions.length; i++) {\n          selectedValues.push(filteredOptions[i][optValue]);\n        }\n      }\n\n      setSelectedItems(selectedValues);\n      onValueChange(selectedValues); // send value to parent\n      return !prevVal;\n    });\n\n    if (typeof listControls?.selectAllCallback === 'function' && !selectAll) {\n      listControls.selectAllCallback();\n    }\n\n    if (typeof listControls?.unselectAllCallback === 'function' && selectAll) {\n      listControls.unselectAllCallback();\n    }\n  };\n\n  /*===========================================\n   * Handle side effects\n   *==========================================*/\n  const checkSelectAll = useCallback(\n    (selectedValues: any[]) => {\n      //if the list contains disabled values, those values will not be selected\n      if (\n        removeDisabledItems(modifiedOptions)?.length === selectedValues?.length\n      ) {\n        setSelectAll(true);\n      } else {\n        setSelectAll(false);\n      }\n    },\n    [modifiedOptions]\n  );\n\n  // anytime the selected items change, check if it is time to set `selectAll` to true\n  useEffect(() => {\n    if (isMultiple) {\n      checkSelectAll(selectedItems);\n    }\n    return () => {};\n  }, [checkSelectAll, isMultiple, selectedItems]);\n\n  /*===========================================\n   * Get label handler\n   *==========================================*/\n  const getSelectedItemsLabel = () => {\n    if (isMultiple && Array.isArray(selectedItems)) {\n      let selectedLabels: Array<string> = [];\n\n      selectedItems?.forEach((element: number | string) => {\n        let selectedItemLabel = modifiedOptions?.find(\n          (item: TFlatListItem) => item[optValue] === element\n        )?.[optLabel];\n        selectedLabels.push(selectedItemLabel);\n      });\n      return selectedLabels;\n    }\n\n    let selectedItemLabel = modifiedOptions?.find(\n      (item: TFlatListItem) => item[optValue] === selectedItem\n    );\n    return selectedItemLabel?.[optLabel];\n  };\n\n  /*===========================================\n   * Search\n   *==========================================*/\n  const onSearch = (value: string) => {\n    setSearchValue(value);\n\n    let searchText = escapeRegExp(value).toString().toLocaleLowerCase().trim();\n\n    const regexFilter = new RegExp(searchText, 'i');\n\n    // Because the options array will be mutated while searching, we have to search with the original array\n    const searchResults = isSectionList\n      ? searchSectionList(options as TSectionList, regexFilter)\n      : searchFlatList(options as TFlatList, regexFilter);\n\n    setNewOptions(searchResults);\n  };\n\n  const searchFlatList = (flatList: TFlatList, regexFilter: RegExp) => {\n    const searchResults = flatList.filter((item: TFlatListItem) => {\n      if (\n        item[optLabel].toString().toLowerCase().search(regexFilter) !== -1 ||\n        item[optValue].toString().toLowerCase().search(regexFilter) !== -1\n      ) {\n        return true;\n      }\n      return false;\n    });\n    return searchResults;\n  };\n\n  const searchSectionList = (\n    sectionList: TSectionList,\n    regexFilter: RegExp\n  ) => {\n    const searchResults = sectionList.map((listItem: TSectionListItem) => {\n      const filteredData = listItem.data.filter((item: TFlatListItem) => {\n        if (\n          item[optLabel].toString().toLowerCase().search(regexFilter) !== -1 ||\n          item[optValue].toString().toLowerCase().search(regexFilter) !== -1\n        ) {\n          return true;\n        }\n        return false;\n      });\n\n      return { ...listItem, data: filteredData };\n    });\n\n    return searchResults;\n  };\n\n  /*===========================================\n   * Modal\n   *==========================================*/\n  const handleToggleModal = () => {\n    if (disabled) {\n      // protecting any toggleModal invocation when Dropdown is disabled by not activating state\n      return;\n    }\n    setOpen(!open);\n    setSearchValue('');\n    setNewOptions(options);\n    setListIndex({ itemIndex: -1, sectionIndex: -1 });\n  };\n\n  useEffect(() => {\n    if (hideModal) {\n      setOpen(false);\n    }\n    return () => {};\n  }, [hideModal]);\n\n  let primary = primaryColor || colors.gray;\n\n  /*===========================================\n   * setIndexOfSelectedItem - For ScrollToIndex\n   *==========================================*/\n  const setIndexOfSelectedItem = (selectedLabel: string) => {\n    isSectionList\n      ? (options as TSectionListItem[] | undefined)?.map(\n          (item: TSectionListItem, sectionIndex: number) => {\n            item?.data?.find((dataItem: TFlatListItem, itemIndex: number) => {\n              if (dataItem[optLabel] === selectedLabel) {\n                setListIndex({ sectionIndex, itemIndex });\n              }\n            });\n          }\n        )\n      : (options as TFlatListItem[] | undefined)?.find(\n          (item: TFlatListItem, itemIndex: number) => {\n            if (item[optLabel] === selectedLabel) {\n              setListIndex({ itemIndex });\n            }\n          }\n        );\n  };\n\n  return (\n    <>\n      <Dropdown\n        label={label}\n        placeholder={placeholder}\n        helperText={helperText}\n        error={error}\n        getSelectedItemsLabel={getSelectedItemsLabel}\n        selectedItem={selectedItem}\n        selectedItems={selectedItems}\n        handleToggleModal={handleToggleModal}\n        labelStyle={labelStyle}\n        dropdownIcon={dropdownIcon}\n        dropdownStyle={dropdownStyle}\n        dropdownIconStyle={dropdownIconStyle}\n        dropdownContainerStyle={dropdownContainerStyle}\n        dropdownErrorStyle={dropdownErrorStyle}\n        dropdownErrorTextStyle={dropdownErrorTextStyle}\n        dropdownHelperTextStyle={dropdownHelperTextStyle}\n        selectedItemStyle={selectedItemStyle}\n        multipleSelectedItemStyle={multipleSelectedItemStyle}\n        isMultiple={isMultiple}\n        primaryColor={primary}\n        disabled={disabled}\n        placeholderStyle={placeholderStyle}\n        setIndexOfSelectedItem={setIndexOfSelectedItem}\n        {...rest}\n      />\n      <CustomModal\n        open={open}\n        modalBackgroundStyle={modalBackgroundStyle}\n        modalOptionsContainerStyle={modalOptionsContainerStyle}\n        onRequestClose={() => handleToggleModal()}\n        modalProps={modalProps}\n      >\n        <ListTypeComponent\n          ListHeaderComponent={\n            <>\n              {isSearchable && (\n                <Input\n                  value={searchValue}\n                  onChangeText={(text: string) => onSearch(text)}\n                  style={searchControls?.textInputStyle || searchInputStyle}\n                  primaryColor={primary}\n                  textInputContainerStyle={\n                    searchControls?.textInputContainerStyle\n                  }\n                  placeholder={\n                    searchControls?.textInputProps?.placeholder || 'Search'\n                  }\n                  {...searchControls?.textInputProps}\n                />\n              )}\n              {listHeaderComponent}\n              {!listControls?.hideSelectAll &&\n                isMultiple &&\n                modifiedOptions?.length > 1 && (\n                  <View style={styles.optionsContainerStyle}>\n                    <TouchableOpacity onPress={() => {}}>\n                      <CheckBox\n                        value={selectAll}\n                        label={\n                          selectAll\n                            ? listControls?.unselectAllText || 'Clear all'\n                            : listControls?.selectAllText || 'Select all'\n                        }\n                        onChange={() => handleSelectAll()}\n                        primaryColor={primary}\n                        checkboxSize={checkboxSize}\n                        checkboxStyle={checkboxStyle}\n                        checkboxLabelStyle={checkboxLabelStyle}\n                        checkboxComponentStyles={checkboxComponentStyles}\n                        checkboxComponent={checkboxComponent}\n                      />\n                    </TouchableOpacity>\n                  </View>\n                )}\n            </>\n          }\n          ListFooterComponent={listFooterComponent}\n          listComponentStyles={listComponentStyles}\n          options={newOptions}\n          optionLabel={optLabel}\n          optionValue={optValue}\n          isMultiple={isMultiple}\n          isSearchable={isSearchable}\n          selectedItems={selectedItems}\n          selectedItem={selectedItem}\n          handleMultipleSelections={handleMultipleSelections}\n          handleSingleSelection={handleSingleSelection}\n          primaryColor={primary}\n          checkboxSize={checkboxSize}\n          checkboxStyle={checkboxStyle}\n          checkboxLabelStyle={checkboxLabelStyle}\n          checkboxComponentStyles={checkboxComponentStyles}\n          checkboxComponent={checkboxComponent}\n          listIndex={listIndex}\n          emptyListMessage={listControls?.emptyListMessage}\n        />\n      </CustomModal>\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  optionsContainerStyle: {\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    flexDirection: 'row',\n  },\n});\n\nexport default DropdownSelect;\n"],"mappings":"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"}